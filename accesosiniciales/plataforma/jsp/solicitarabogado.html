<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Solicitar Abogado - TSJ CATRP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin:0;
    font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
  }

  .card {
    background: rgba(255,255,255,0.1);
    padding:40px 50px;
    border-radius:16px;
    box-shadow:0 20px 40px rgba(0,0,0,0.4);
    backdrop-filter: blur(10px);
    max-width:450px;
    width:100%;
  }

  h1 {
    text-align:center;
    margin-bottom:30px;
    font-weight:600;
  }

  .form-group {
    margin-bottom:18px;
  }

  .form-group label {
    display:block;
    font-weight:600;
    margin-bottom:6px;
  }

  .form-group input, .form-group textarea {
    width:100%;
    padding:10px 12px;
    border-radius:8px;
    border:none;
    font-size:14px;
  }

  button {
    width:100%;
    padding:12px;
    border:none;
    border-radius:24px;
    background: linear-gradient(135deg,#1e90ff,#0077cc);
    font-size:15px;
    font-weight:600;
    color:white;
    cursor:pointer;
    transition: all 0.25s ease;
  }

  button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.35);
  }

  #msg {
    margin-top:15px;
    text-align:center;
    font-size:14px;
    color:#ffb3b3;
    min-height:18px;
  }
</style>
</head>
<body>

<div class="card">
  <h1>Solicitar Abogado</h1>

  <div class="form-group">
    <label>Nombre y Apellidos</label>
    <input type="text" id="nombre" required>
  </div>

  <div class="form-group">
    <label>Usuario Discord</label>
    <input type="text" id="discord" required>
  </div>

  <div class="form-group">
    <label>Motivo</label>
    <textarea id="motivo" rows="3" required></textarea>
  </div>

  <div class="form-group">
    <label>DÃ­a del Juicio (opcional)</label>
    <input type="date" id="diaJuicio">
  </div>

  <div class="form-group">
    <label>Hora del Juicio (opcional)</label>
    <input type="time" id="horaJuicio">
  </div>

  <div class="form-group">
    <label>DNI</label>
    <input type="text" id="dni" required>
  </div>

  <div class="form-group">
    <label>Edad</label>
    <input type="number" id="edad" required>
  </div>

  <button id="enviarSolicitud">Enviar Solicitud</button>
  <div id="msg"></div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBPr8ZmxwYLyH1j8EygyMH78_4fAyu0xFo",
    authDomain: "tsjcatrp.firebaseapp.com",
    projectId: "tsjcatrp",
    storageBucket: "tsjcatrp.firebasestorage.app",
    messagingSenderId: "858193188422",
    appId: "1:858193188422:web:3b5118e1022a44faad9c47"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const msgDiv = document.getElementById("msg");

  document.getElementById("enviarSolicitud").addEventListener("click", async ()=>{
    const nombre = document.getElementById("nombre").value.trim();
    const discord = document.getElementById("discord").value.trim();
    const motivo = document.getElementById("motivo").value.trim();
    const diaJuicio = document.getElementById("diaJuicio").value;
    const horaJuicio = document.getElementById("horaJuicio").value;
    const dni = document.getElementById("dni").value.trim();
    const edad = document.getElementById("edad").value.trim();

    if(!nombre || !discord || !motivo || !dni || !edad){
      msgDiv.textContent = "Por favor complete los campos obligatorios";
      return;
    }

    try{
      await addDoc(collection(db,"solicitudabogado"),{
        nombre,
        discord,
        motivo,
        diaJuicio: diaJuicio || null,
        horaJuicio: horaJuicio || null,
        dni,
        edad,
        fechaSolicitud: new Date()
      });

      msgDiv.style.color="#b3ffb3";
      msgDiv.textContent = "Solicitud enviada correctamente";

      // limpiar formulario
      document.getElementById("nombre").value="";
      document.getElementById("discord").value="";
      document.getElementById("motivo").value="";
      document.getElementById("diaJuicio").value="";
      document.getElementById("horaJuicio").value="";
      document.getElementById("dni").value="";
      document.getElementById("edad").value="";

    }catch(err){
      console.error(err);
      msgDiv.style.color="#ffb3b3";
      msgDiv.textContent = "Error enviando la solicitud";
    }
  });
</script>

</body>
</html>
